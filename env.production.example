# ============================================
# GoPay - IntaSend PRODUCTION Configuration
# ============================================

# IMPORTANT: This is for PRODUCTION use with real money!
# Make sure you have:
# 1. Completed IntaSend KYC verification ✓
# 2. Obtained production API keys
# 3. Configured webhook URLs
# 4. Funded your production wallet

# Application Settings
BASE_PUBLIC_URL=https://gopay.yourdomain.com

# Supabase Configuration
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# ============================================
# IntaSend PRODUCTION Configuration
# ============================================
# IMPORTANT: Use PRODUCTION keys here (NOT sandbox!)
# Get from: https://dashboard.intasend.com/settings/api-keys
# Look for keys starting with:
#   - ISSecretKey_live_...
#   - ISPubKey_live_...

# IntaSend Production API Keys
INTASEND_API_KEY=ISSecretKey_live_your-production-key-here
INTASEND_PUBLISHABLE_KEY=ISPubKey_live_your-production-key-here

# Environment Mode
# MUST be 'false' for production (this uses real money!)
INTASEND_TEST_MODE=false

# ============================================
# Webhook Configuration
# ============================================
# Configure in IntaSend Dashboard: https://dashboard.intasend.com/settings/webhooks
# 
# Webhook URL: https://gopay.yourdomain.com/api/webhooks/intasend
# 
# Enable these events:
#   ✓ payment.collection.completed
#   ✓ payment.collection.failed
#   ✓ payout.completed
#   ✓ payout.failed
# 
# After creating webhook, copy the webhook secret below:

INTASEND_WEBHOOK_SECRET=whs_your-webhook-secret-here

# ============================================
# Platform Fee Configuration
# ============================================
# These fees are deducted from each payment before driver payout

# Percentage fee (0.5 = 0.5% of payment)
PLATFORM_FEE_PERCENTAGE=0.5

# Fixed fee per transaction (in KES)
# Set to 0 if you only want percentage-based fees
PLATFORM_FEE_FIXED=0

# ============================================
# Example Fee Calculation:
# ============================================
# If passenger pays 1000 KES with 0.5% fee:
#   - Platform fee: 1000 × 0.5% = 5 KES
#   - Driver receives: 1000 - 5 = 995 KES
#
# If you add fixed fee of 5 KES:
#   - Platform fee: (1000 × 0.5%) + 5 = 10 KES
#   - Driver receives: 1000 - 10 = 990 KES
# ============================================

# ============================================
# Security Settings
# ============================================
# Set these for enhanced security

# Allowed CORS origins (comma-separated)
ALLOWED_ORIGINS=https://gopay.yourdomain.com

# Session secret key (generate random string)
SECRET_KEY=your-random-secret-key-here

# ============================================
# Monitoring & Logging
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Sentry DSN (optional - for error tracking)
# SENTRY_DSN=your-sentry-dsn-here

# ============================================
# Deployment Checklist Before Going Live
# ============================================
# 
# □ Run database migration: database/intasend_migration.sql
# □ Test API connection with production keys
# □ Configure webhook in IntaSend dashboard
# □ Test webhook delivery (use IntaSend test tool)
# □ Fund IntaSend production wallet
# □ Test end-to-end payment with small amount (e.g., 10 KES)
# □ Verify payout received by test driver
# □ Setup monitoring/alerting
# □ Configure SSL/HTTPS on domain
# □ Test QR code scanning from mobile device
# □ Backup database
# □ Document support procedures
# 
# ============================================

